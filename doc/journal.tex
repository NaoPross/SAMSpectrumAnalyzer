\documentclass[a4paper]{article}

% metadata
% ------------------------------------------------------------------------------

\newcommand{\name}{Naoki Pross}
\newcommand{\instructor}{Rinaldo Geiler, Daniele Kamm}
\newcommand{\project}{Spectrum Analyzer}
\newcommand{\projstart}{12.04.2018}
\newcommand{\projend}{15.04.2018}

% auto
\newcommand{\projperiod}{\projstart{} -- \projend{}}

% preamble
% ------------------------------------------------------------------------------

% tables
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{array}
\usepackage{multirow}
\usepackage{ltablex}
\keepXColumns

% colors
\usepackage[table]{xcolor}
\usepackage{graphicx}

% font
% \usepackage[sfdefault]{noto}
% \usepackage{lmodern}
\renewcommand{\familydefault}{\sfdefault}

% urls
\usepackage[colorlinks=true, urlcolor=blue]{hyperref}

% layout
\usepackage[left=2cm, right=2cm, top=3cm, bottom=3cm]{geometry}
\usepackage{fancyhdr}

% header and footer
\pagestyle{fancy}
\fancyhead[L]{CAM-SAM}
\fancyhead[C]{Elettronico}
\fancyhead[R]{22.02.2018}
\fancyfoot[L]{\jobname.tex}
\fancyfoot[C]{\name}
\fancyfoot[R]{\thepage}

\renewcommand\arraystretch{1.5}
\renewcommand\tabcolsep{5pt}
\setlength{\parindent}{0pt}
\setlength{\parskip}{1em}

% macros
\newcommand{\journalentry}[5]{%
    #1 & #2 & #3 & #4 & #5 \\\hline
}

% document
% ------------------------------------------------------------------------------

\begin{document}
    \begin{center}
        \bf \LARGE DIARIO GIORNALIERO
    \end{center}
    
    \vspace{5mm}

    \begin{tabularx}{\textwidth}{| lX | lX |}
        \hline
        \bfseries Candidato: & \name &
        \bfseries Progetto: & \project
        \\\hline
        \bfseries Formatore: & \instructor &
        \bfseries Periodo: & \projperiod
        \\\hline
    \end{tabularx}
   
    \vspace{5mm}
    
    \begin{tabularx}{\textwidth}{| c | c | c | p{.4\textwidth} | X |}
        \hline    
        \rowcolor{gray!30}
        \bfseries Giorno &
        \bfseries Data & 
        \bfseries Ore &
        \bfseries Descrizione attivit\`a &
        \bfseries Osservazioni
        \\
        \rowcolor{gray!30}
        & & &
        (Attivit\`a eseguite, metodi adottati, decisioni prese,
        dimostrazioni effettuate, ecc.) & 
        \\\hline

%% journal
% ------------------------------------------------------------------------------
        
        \iffalse
        \journalentry{Giorno}{Data}{Ore}{
            Descrizione
        }{
            Osservazioni
        }
        \fi

        \journalentry{Gio}{12.04.2018}{2}{
            Preparazione della documentazione, della pianifica ed organizzazione
            generale del progetto.
        }{}

        \journalentry{Gio}{12.04.2018}{5}{
            Analisi e studio del concetto matematico.
        }{}

        \journalentry{Gio}{12.04.2018}{1}{
            Raccolto informazioni e librerie software per i componenti utilizzati
            dal progetto. Inoltre \`e stata preparata una struttura per la
            documentazione.
        }{}

        \journalentry{Ve}{13.04.2018}{2}{
            Scelto i componenti analogici e passivi e preparato una BOM (Bill Of 
            Materials). Progettato uno schema elettrico.

        }{
            \`E stato scelto di utilizzare un unico amplificatore di qualit\`a 
            migliore (per audio) con un multiplexer invece di un package con pi\`u
            amplificatori di precisione inferiore.
        }

        \journalentry{Ve}{13.04.2018}{3}{
            Realizzato la parte centrale dello schema elettrico in formato ECAD
            (Altium Designer). Ossia i circuiti di multiplexing, di adattamento
            del segnale e di filtraggio delle frequenze indesiderate.
        }{
            Manca il jack di alimentazione (non ancora necessaria su tavola 
            sperimentale) e il circuito di adattamento di tensione da 12\,V a 5\,V.
        }

        \journalentry{Ve}{13.04.2018}{2}{
            Modificato il circuito progettato per utilizzare un filtro attivo
            anzich\`e passivo dopo aver osservato sperimentalmente
            l'attenuazione dal filtro passivo.
        }{
            Il circuto su piastra sperimentale non \`e ancora funzionante
            per sviluppare i primi programmi di test.
        }

        \journalentry{Ve}{13.04.2018}{2}{
            Studiato il concetto matematico della Fourier transform con il 
            professor Edoardo Cima.
        }{
            L'attivit\`a non era programmata poich\`e la disponibilit\`a
            dei docenti \`e limitata.
        }

        \journalentry{Lu}{16.04.2018}{1}{
            Realizzato un circuito di prova su piastra sperimentale.
        }{
            Si \`e osservato che il circuito progettato non era idoneo.
            L'amplificatore scelto in precedenta (TL071) non \`e in grado di
            lavorare come necessario nel margine da 0\,V a 5\,V. Dunque \`e
            stato cambiato in un OPAMP Rail-to-Rail AD820 sotto consiglio di
            D. Kamm.
        }

        \journalentry{Lu}{16.04.2018}{2}{
            Corretto il circuito di amplificazione e risolto imperfezioni minori.
        }{
            L'amplificatore combinato con il filtro \`e stato separato in due
            stadi, di amplificazione e di filtraggio.
        }

        \journalentry{Lu}{16.04.2018}{1}{
            Corretto il montaggio sulla piastra sperimentale.
        }{
            Il filtro attivo non \`e presente sulla tavola perch\'e si deve
            aspettare la comanda del componente.
        }

        \journalentry{Lu}{16.04.2018}{5}{
            Implementato il codice del microcontroller per configurare l'ADC ed
            un timer per un campionamento regolare.
        }{
            Si possono osservare i dettagli su Git nei seguenti commit:
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/7730a96426eaaac0f8d34749fef92434039ebbb2}{\texttt{7730a96}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/b8366383b158ed3b41452af06d46b3a86c631cb5}{\texttt{b836638}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/b482c7e0997037336937ff862645ea9d92b0f4a3}{\texttt{b482c7e}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/aa19054b009ff2d4be4fb319efeab62fda09737d}{\texttt{aa19054}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/2996f6549ad660b89e5f148bdf1339d195e49639}{\texttt{2996f65}}.
        }

        \journalentry{Lu}{16.04.2018}{1}{
            Riordinato lo schema elettrico. Aggiunto il ciruito di regolazione
            della tensione in entrata con un MC7805.
        }{
            Manca ancora il connettore principale dell'alimentazione, rimane da
            decidere se utilizzare dei morsetti o un power jack.
        }

        \journalentry{Ma}{17.04.2018}{2}{
            Diviso lo schema elettrico su pi\`u fogli per dendere il tutto pi\`u
            ordinato. Preparato il footprint del Jack Audio.
        }{}

        \journalentry{Ma}{17.04.2018}{1}{
            Analizzato un problema inerente alla programmazione dell'interfaccia
            software per il computer con il professor Emidio Planamente.
            \`E presente un errore nella gestione delle risorse nel thread
            parallelo di gestione del seriale. Il thread della classe 
            \texttt{SerialWorker} deve essere terminato per rilasciare la
            risorsa \texttt{MainWindow::\_serial}, ma ci\`o non accade e il 
            programma crasha. Il problema \`e ancora irrisolto.

            Riportato lo stato e discusso del progetto con Marco Bertoz (Perito).
        }{
            Dettagli tecnici:
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/8ba16b0f28e1724b825c14b6c3788319a617a718}{\texttt{8ba16b0}}
        }

        \journalentry{Ma}{17.04.2018}{2}{
            Terminato lo schema elettrico e controllato tutti i footprints.
            Richiesto una revisione al professor Rinaldo Geiler prima di 
            procedere al PCB.
        }{
            Se non vi sono errori si potr\`a iniziare il design del PCB.
        }


        \journalentry{Gio}{26.04.2018}{4}{
            Integrato dei consigli dal feedback da Geiler, ossia correzioni
            miniori e l'aggiunta di un bottone di reset manuale.
            Iniziato il design del PCB.
        }{
            Presentato il progetto al capo perito.
        }

        \journalentry{Gio}{26.04.2018}{4}{
            Risolto un il bug dell'interfaccia software desktop con il professor
            E. Planamente. Il thread di lettura del seriale adesso viene chiuso
            correttamente.

            Implementato la rappresentazione grafica dei segnali campionati
            dal microcontroller ricevuti attraverso la seriale RS232.
        }{
            Vedi
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/69d5d425552a9eecee7f168bfa8912061e4dd876}{\texttt{69d5d42}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/2791cdd30ab13738704171205abc46ea239e9e02}{\texttt{2791cdd}}
        }

        \journalentry{Ve}{27.04.2018}{5}{
            Terminato il routing del PCB.
            Risolto i problemi indicati dal DRC.
        }{
            Il footprint del potenziometro R14 \`e sbagliato.
            Il footprint del connettore RCA non pu\`o essere controllato poich\`e
            il componente non \`e ancora arrivato. Le correzioni del componente
            R14 e di eventuali altri saranno eseguite una volta ottenuti tutti
            i componenti prima della stampa.
        }

        \journalentry{Ve}{27.04.2018}{4}{
            Iniziato ad implementare un protocollo migliore per mandare i dati dal
            microcontroller al PC.
            Risolto un bug minore dell'applicativo desktop che causava un malfunzionamento
            sotto Windows. In dettaglio: la funzione \texttt{\_serial.waitReadable();}
            emetteva un \texttt{IOException} causando la chiusura del thread
            di lettura del seriale.
        }{

        }

        \journalentry{Lu}{30.04.2018}{2}{
            Terminato l'implementazione del protocollo per mandare i dati.
            \`E ora possibile mandare numeri complessi interi sia positivi
            che negativi.
        }{}

        \journalentry{Lu}{30.04.2018}{4}{
            Implementato il calcolo della FFT sul microcontroller e la 
            corrispondente visualizzazione sul PC.
        }{
            Commits: 
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/8adeaa8dc5a6355d08012a096ec995c56b4011a1}{\texttt{8adeaa8}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/bec418507b056d6dede4e62c8676ca9d6e3582da}{\texttt{bec4185}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/dd19e0d7e2feadcebe527d0460fbf45567f5de80}{\texttt{dd19e0d}}
        }

        \journalentry{Lu}{30.04.2018}{1}{
            Corretto i footprints, preparato i lucidi per la stampa.
        }{}

        \journalentry{Lu}{30.04.2018}{2}{
            Cambiato il baudrate della trasmissione a 57.6\,k e raddoppiato
            il numero di campioni. Modificato l'implementazione del PC per
            utilizzare le strutture \texttt{std::complex} invece della mia
            implementazione \texttt{sam::complex\_int16\_t} poich\`e sono
            standard ed hanno gi\`a tutte le operazioni matematiche definite.
        }{
            Commits:
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/d34ffc6e650fcaf95d45dda8759bc1b01d7c51e2}{\texttt{d34ffc6}},
            \href{https://github.com/NaoPross/SAMSpectrumAnalyzer/commit/41dae5e697ad2ab06d51ca150320824e97ada254}{\texttt{41dae5e}}
        }

        \journalentry{Lu}{30.04.2018}{1}{
            Continuato la documentazione.
        }{}


% ------------------------------------------------------------------------------
    \end{tabularx}
\end{document}
